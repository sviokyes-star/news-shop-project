# HTML-панели для магазина CS2

## Что это?

Версия 1.1.0 магазина с HTML-панелями — интерактивный интерфейс с навигацией стрелками.

## Как работает?

### 1. **Файлы**
- `shop_panel.html` — HTML интерфейс магазина
- `ShopPlugin.cs` — обновлённый плагин с поддержкой HTML-панелей

### 2. **Установка**

#### Вариант A: MOTD (встроенный метод)
Плагин генерирует HTML динамически и показывает через команду `motd_show`:

```bash
# Просто пересоберите плагин
dotnet build -c Release
```

**Плюсы:**
- Не требует установки файлов на клиенте
- Работает сразу после установки плагина

**Минусы:**
- Ограниченная функциональность (не все JS API доступны)
- Может не работать на некоторых серверах с отключённым MOTD

#### Вариант B: FastDL (полная версия)
Разместите `shop_panel.html` на веб-сервере с FastDL:

1. Загрузите `shop_panel.html` на ваш веб-сервер
2. Настройте FastDL на сервере CS2:
```
sv_downloadurl "http://your-server.com/fastdl"
sv_allowdownload 1
sv_allowupload 0
```

3. Игроки автоматически скачают файл при подключении

**Плюсы:**
- Полная функциональность JavaScript
- Лучшая производительность
- Кастомизация дизайна

**Минусы:**
- Требует настройки веб-сервера
- Игроки должны скачать файлы

### 3. **Управление**

- **⬅️ ➡️** — навигация между товарами
- **⬆️ ⬇️** — перемещение по строкам
- **ENTER** — купить товар или надеть скин
- **ESC** — закрыть магазин

### 4. **Функции плагина**

Плагин теперь использует `motd_show` для отображения HTML:

```csharp
player.ExecuteClientCommand($"motd_show {htmlContent}");
```

HTML-панель динамически генерируется с данными игрока:
- Текущий баланс золота и серебра
- Список всех товаров
- Отметки купленных скинов
- Интерактивные кнопки

### 5. **Кастомизация**

Отредактируйте `shop_panel.html`:

```html
<!-- Изменить цвета -->
<style>
    .gold { color: #FFD700; }  /* Золото */
    .silver { color: #C0C0C0; }  /* Серебро */
</style>

<!-- Добавить анимации -->
<style>
    .item:hover {
        transform: translateY(-5px);
    }
</style>
```

### 6. **Отладка**

Проверьте консоль сервера:
```
[Shop] Отправка HTML-панели для PlayerName
```

Если не работает:
1. Убедитесь, что MOTD не отключён на сервере
2. Проверьте, что игрок не заблокировал MOTD в настройках
3. Попробуйте вариант с FastDL

### 7. **Ограничения**

**MOTD метод:**
- Нет доступа к Panorama UI API
- Ограниченный JavaScript (безопасный режим)
- Не все CSS3 анимации работают

**Решение:** Используйте FastDL для полной функциональности.

## Команды

- `/shop` — открыть магазин (теперь HTML-панель)
- `/balance` — баланс (в чате, как раньше)
- `/buy <id>` — купить через чат (запасной вариант)
- `/setskin <id>` — надеть через чат (запасной вариант)
- `/myskins` — список скинов в чате

## Технические детали

Плагин использует комбинацию технологий:
1. C# генерирует HTML с данными игрока
2. `ExecuteClientCommand` отправляет HTML в клиент
3. JavaScript обрабатывает навигацию стрелками
4. Callbacks через `engine.call()` возвращают данные в плагин

## Поддержка

Версия: 1.1.0
Автор: Okyes
CounterStrikeSharp API: 1.0.317
